const Store=require("electron-store"),store=new Store,altCode=16,ctrlCode=17,spaceCode=32;var stopwatch=document.getElementById("stopwatch-display"),new_best_alert=document.getElementById("new-best-alert"),hitime=document.getElementById("hi-time"),timeoutId=null,ms=0,sec=0,min=0,isStarted=!1;function start(){timeoutId=setTimeout(function(){isStarted=!0,ms=parseInt(ms),sec=parseInt(sec),min=parseInt(min),ms++,100==ms&&(++sec,ms=0),60==sec&&(++min,sec=0),10>ms&&(ms="0"+ms),10>sec&&(sec="0"+sec),10>min&&(min="0"+min),stopwatch.innerHTML=min+":"+sec+"."+ms,start()},10)}function dnf(){ms=0,sec=0,min=0,clearTimeout(timeoutId),stopwatch.innerHTML="DNF",isStarted=!1}function stop(){stopwatch.innerHTML;if(clearTimeout(timeoutId),isStarted=!1,store.get("Best-Time")){let a=store.get("Best-Time"),b=stopwatch.innerHTML,c=a.split(":"),d=a.split("."),e=b.split(":"),f=a.split("."),g=c[1],h=c[2],i=d[2],j=e[1],k=e[2],l=f[2];j<=g&&k<=h&&l<i&&(new_best_alert.innerText="New best!",store.set("Best-Time",b))}else store.set("Best-Time","30:00.00"),stop();hitime.innerHTML="Your current fastest solve time is: "+store.get("Best-Time")+"!"}function reset(){ms=0,sec=0,min=0,clearTimeout(timeoutId),stopwatch.innerHTML="00:00.00",isStarted=!1,new_best_alert.innerText=""}stop(),window.onkeydown=function(a){a.which==spaceCode?!0==isStarted?stop():start():a.which==ctrlCode?reset():a.which==altCode&&dnf()};
